<%= render "layouts/banner" %>

<div class="container box">
    <table class="table table-hover">

        <thead class="thead-light">
            <tr>
                <th scope="col">Pedido de n°</th>
                <th scope="col">Status</th>
                <th scope="col">Data</th>
                <th scope="col">Usuário</th>
                <th scope="col">Preço Total</th>
                <th scope="col" colspan="3">Detalhes</th>
            </tr>
        </thead>

        <tbody>
            <% @orders.each do |order|%>
                <tr>
                    <td scope="row" class="text-secondary"><%= order.id %></td>
                    <td class="text-secondary">
                        <% case Situation.find(order.situation_id).description%>
                            <%when "pendente"%>
                                <div class="statusPending"><%= Situation.find(order.situation_id).description %></div>
                            <%when "entregue"%>
                                <div class="statusDelivered"><%= Situation.find(order.situation_id).description %></div>
                            <%when "cancelado"%>
                                <div class="statusCanceled"><%= Situation.find(order.situation_id).description %></div>
                            <%else %>
                                <div class="statusDefault"><%= Situation.find(order.situation_id).description %></div>
                        <%end%>
                    </td>
                    <td class="text-secondary"><%= order.created_at.strftime("%d/%m/%y") %></td>
                    <td class="text-secondary"><%= User.find(order.user_id).full_name %></td>
                    <td class="text-secondary"><%= order.price %></td>
                    <td ><%= link_to "ver itens pedidos", order_path(order) ,class:"text-info" %></td>
                    <td ><%=link_to "editar", edit_order_path(order), method: :get, class:"text-warning"%></td>
                    <td ><%=link_to "excluir", orders_path, method: :delete, data: {confirm:"Você tem certeza que quer excluir esse pedido?"}, class:"text-danger" %></td>
                </tr>
            <%end%>
        </tbody>
    </table>
</div>

<%= render "layouts/footer" %>
